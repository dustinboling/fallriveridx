<%= params[:callback] %>({ "markers": {
<% @markers.each_with_index do |(key, value), i| %>
  "<%= key %>": {
  <% if i == @markers.length - 1 %>
    "LatLng": <%= value["LatLng"].collect {|v| v.to_f } %>,
    "ListPrice": "<%= number_to_currency(value["ListPrice"]) %>",
    "Address": "<%= value["Address"].titleize %>",
    "City": "<%= value["City"] %>",
    "ZipCode": "<%= value["ZipCode"] %>",
    "Bedrooms": "<%= value["Bedrooms"] %>",
    "Baths": "<%= value["Baths"] %>",
    "ListingStatus": "<%= value["ListingStatus"] %>",
    "ListingDate": "<%= value["ListingDate"] %>",
    "BuildingSize": "<%= value["BuildingSize"] %>",
    "LotSizeSQFT": "<%= value["LotSizeSQFT"] %>"
    }
  <% else %>
    "LatLng": <%= value["LatLng"].collect {|v| v.to_f } %>,
    "ListPrice": "<%= number_to_currency(value["ListPrice"]) %>",
    "Address": "<%= value["Address"].titleize %>",
    "City": "<%= value["City"] %>",
    "ZipCode": "<%= value["ZipCode"] %>",
    "Bedrooms": "<%= value["Bedrooms"] %>",
    "Baths": "<%= value["Baths"] %>",
    "ListingStatus": "<%= value["ListingStatus"] %>",
    "ListingDate": "<%= value["ListingDate"] %>",
    "BuildingSize": "<%= value["BuildingSize"] %>",
    "LotSizeSQFT": "<%= value["LotSizeSQFT"] %>" 
    },
  <% end %>
<% end %>
} 
});
